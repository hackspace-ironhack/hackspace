(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),l=a.n(s),o=(a(66),a(6)),c=a(11),i=a(8),u=a(7),m=a(9),p=a(10),h=a(106),d=a(107),g=a(5),f=a.n(g),b=function(e,t){return f.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},E=function(e,t){return f.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},v=function(e){f.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)}))},y=function(e){return r.a.createElement(h.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(h.a.Brand,{href:"/"},"Hackspace"),r.a.createElement(h.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(d.a,{className:"mr-auto"},r.a.createElement("div",{className:"salutation"},e.user&&r.a.createElement(d.a.Item,null,"Welcome, ",e.user.username,"!")),e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,null,r.a.createElement(p.b,{className:"bar-links",to:"/profile"},"Profile")),r.a.createElement(d.a.Item,null,r.a.createElement(p.b,{className:"bar-links",to:"/projects",onClick:function(){}},"My Work")),r.a.createElement(d.a.Item,null,r.a.createElement(p.b,{className:"bar-links",to:"/chat"},"Chat")),r.a.createElement(d.a.Item,null,r.a.createElement(p.b,{className:"bar-links",to:"/todolist"},"Things to do")),r.a.createElement(d.a.Item,null,r.a.createElement(p.b,{className:"bar-links",to:"/search"},"Find Users")),r.a.createElement(d.a.Item,null,r.a.createElement(p.b,{className:"bar-links",to:"/",onClick:function(){return v(e)}}," Logout "))):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,null,r.a.createElement(p.b,{className:"bar-links",to:"/signup"},"Signup")),r.a.createElement(d.a.Item,null,r.a.createElement(p.b,{className:"bar-links",to:"/login"},"Login"))))))},C=a(24),j=a(20),O=a(105),w=a(102),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",city:"",skills:"",hobbies:""},a.handleChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(j.a)({},t,n))},a.handleSubmit=function(e){e.preventDefault(),f.a.patch("/api/about/".concat(a.props.user._id),{name:a.state.name,city:a.state.city,skills:a.state.skills,hobbies:a.state.hobbies}).then((function(){a.setState({name:"",city:"",skills:"",hobbies:""}),a.props.loadUser(),a.props.history.push("/profile")})).catch((function(e){console.log(e)}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"name"},"Name(as you like to see in your profile): "),r.a.createElement(O.a.Control,{type:"text",onChange:this.handleChange,id:"name",name:"name",value:this.state.name})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"city"},"City: "),r.a.createElement(O.a.Control,{onChange:this.handleChange,type:"text",name:"city",id:"city",value:this.state.description})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"skills"},"Skills: "),r.a.createElement(O.a.Control,{onChange:this.handleChange,type:"text",name:"skills",id:"skills",value:this.state.skills})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"hobbies"},"Interests: "),r.a.createElement(O.a.Control,{onChange:this.handleChange,type:"text",name:"hobbies",id:"hobbies",value:this.state.hobbies})),r.a.createElement(w.a,{type:"submit"},"Add to your profile"))}}]),t}(n.Component),S=(a(97),function(e){return console.log("posts Lit",e),r.a.createElement("div",null,e.posts?r.a.createElement("h2",null,"My Posts"):"",e.posts?e.posts.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h2",null,e.post))})):"")}),I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={post:""},a.handleChange=function(e){var t=e.target.value,n=e.target.name;a.setState(Object(j.a)({},n,t))},a.handleSubmit=function(e){e.preventDefault(),f.a.post("/api/post",{post:a.state.post}).then((function(){a.setState({post:""}),a.props.getData()})).catch((function(e){console.log(e)}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"post"},"Your Post: "),r.a.createElement(O.a.Control,{type:"text",onChange:this.handleChange,id:"post",name:"post",value:this.state.post})),r.a.createElement(w.a,{type:"submit"},"Post your thought"))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[]},a.componentDidMount=function(){a.getData()},a.getData=function(){f.a.get("/api/post").then((function(e){a.setState({posts:e.data})})).catch((function(e){console.log(e)}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log("posts > ",this.state),r.a.createElement("div",{className:"post-container"},r.a.createElement(I,{getData:this.getData}),r.a.createElement(S,{posts:this.state.posts}))}}]),t}(n.Component),U=(n.Component,n.Component,function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={profile:{}},a.userId=a.props.match.params.id,a.componentDidMount=function(){a.loadData()},a.loadData=function(){void 0!==a.userId&&(console.log(a.userId),f.a.get("/api/user/".concat(a.userId)).then((function(e){return a.setState({profile:e.data})})))},a.followUser=function(){f.a.post("/api/user/friends",{friend:a.userId})},a.render=function(){var e=void 0!==a.userId?a.state.profile:a.props.user;return r.a.createElement("div",null,e&&r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,"Name: ",e.name),r.a.createElement("li",null,"City: ",e.city),r.a.createElement("li",null,"Skills: ",e.skills),r.a.createElement("li",null,"Hobbies: ",e.hobbies)),a.props.user&&e._id===a.props.user._id&&r.a.createElement(x,{getData:a.loadData,user:e}),a.props.user&&e._id!==a.props.user._id&&r.a.createElement(w.a,{onClick:a.followUser},"Follow")))},a}return Object(m.a)(t,e),t}(n.Component)),D=a(108),F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",email:"",message:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(j.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;b(n,r).then((function(e){e.message?a.setState({message:e.message,username:"",password:""}):(a.props.setUser(e),a.props.history.push("/about"))}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={signup:{display:"flex",flexDirection:"column"}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"signup-container"},r.a.createElement("div",{style:e.signup},r.a.createElement("h1",null,"Together we are stronger")),r.a.createElement("div",{style:e.signup},r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"username"},"Username: "),r.a.createElement(O.a.Control,{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"email"},"Email: "),r.a.createElement(O.a.Control,{type:"text",name:"email",value:this.state.email,onChange:this.handleChange,id:"username"})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(O.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"})),this.state.message&&r.a.createElement(D.a,{variant:"danger"},this.state.message),r.a.createElement(w.a,{variant:"secondary",type:"submit"},"Signup")),"Already have an account?",r.a.createElement(w.a,{variant:"secondary",type:"submit"},r.a.createElement(p.b,{to:"/login"},"Login")))))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",message:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(j.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;E(n,r).then((function(e){e.message?a.setState({message:e.message,username:"",password:""}):(a.props.setUser(e),a.props.history.push("/profile"))}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"username"},"Username: "),r.a.createElement(O.a.Control,{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(O.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"})),this.state.message&&r.a.createElement(D.a,{variant:"danger"},this.state.message),r.a.createElement(w.a,{type:"submit"},"Login")))}}]),t}(n.Component),N=a(103),L=a(109),A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={typedMessage:"",messages:[]},a.userId=a.props.match.params.id,a.intervalId=null,a.componentDidMount=function(){a.loadMessages(),a.intervalId=window.setInterval(a.loadMessages,5e3)},a.componentWillUnmount=function(){clearInterval(a.intervalId)},a.handleChange=function(e){a.setState({typedMessage:e.target.value})},a.onSend=function(e){e.preventDefault(),f.a.post("/api/chat/messages/".concat(a.userId),{message:a.state.typedMessage}).then((function(e){e.data.success&&a.loadMessages(!0)}))},a.loadMessages=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f.a.get("/api/chat/messages/".concat(a.userId)).then((function(t){var n=t.data.messages;console.log(n),a.setState({messages:n,typedMessage:e?"":a.state.typedMessage})}))},a.render=function(){return r.a.createElement(N.a,null,a.state.messages.map((function(e){return r.a.createElement(L.a,{key:e._id,className:a.props.user&&a.props.user._id===e.from._id?"text-right":""},r.a.createElement(L.a.Body,null,r.a.createElement(L.a.Title,null,e.from.username),r.a.createElement(L.a.Text,null,e.message)))})),r.a.createElement(O.a,{onSubmit:a.onSend},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Control,{type:"text",placeholder:"Enter message",onChange:a.handleChange,value:a.state.typedMessage}))))},a}return Object(m.a)(t,e),t}(r.a.Component),G=a(104),_=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={friends:[]},a.loadFriends=function(){f.a.get("/api/chat").then((function(e){var t=e.data.friends;a.setState({friends:t})}))},a.render=function(){return r.a.createElement(N.a,null,r.a.createElement(G.a,null,a.state.friends.map((function(e){return r.a.createElement(G.a.Item,{key:e.to._id},r.a.createElement(p.b,{to:"/chat/".concat(e.to._id)},e.to.username))}))))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadFriends()}}]),t}(r.a.Component),P=a(60),T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={query:"",results:[],message:void 0},a.handleChange=function(e){a.setState({query:e.target.value})},a.onSend=function(e){e.preventDefault(),f.a.get("/api/user?q=".concat(a.state.query)).then((function(e){e.data.users.length>0?a.setState({results:e.data.users,message:void 0}):f.a.get("/api/user").then((function(e){a.setState({results:e.data.users,message:"No user found, showing everyone"})}))}))},a.render=function(){return r.a.createElement(N.a,null,r.a.createElement(O.a,{onSubmit:a.onSend},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Control,{type:"text",placeholder:"Search",onChange:a.handleChange,value:a.state.typedMessage}))),a.state.message&&r.a.createElement(D.a,{variant:"danger"},a.state.message),a.state.results.length>0&&r.a.createElement(G.a,null,a.state.results.map((function(e){return r.a.createElement(P.a,null,r.a.createElement(p.b,{to:"/profile/".concat(e._id)},e.name))}))))},a}return Object(m.a)(t,e),t}(r.a.Component),W=(a(98),a(99),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user},a.setUser=function(e){a.setState({user:e})},a.loadUser=function(){f.a.get("/api/auth/loggedin").then((function(e){var t=e.data;a.setUser(t)}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(y,{user:this.state.user,setUser:this.setUser}),r.a.createElement(C.c,null,r.a.createElement(C.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(F,Object.assign({setUser:e.setUser},t))}}),r.a.createElement(C.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(M,Object.assign({setUser:e.setUser},t))}}),r.a.createElement(C.a,{exact:!0,path:"/about",render:function(t){return r.a.createElement(k,Object.assign({},t,{user:e.state.user,loadUser:e.loadUser}))}}),r.a.createElement(C.a,{exact:!0,path:"/posts",render:function(t){return r.a.createElement(U,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(C.a,{exact:!0,path:"/profile",render:function(t){return r.a.createElement(U,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(C.a,{exact:!0,path:"/chat/:id",render:function(t){return r.a.createElement(A,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(C.a,{exact:!0,path:"/chat",render:function(t){return r.a.createElement(_,{user:e.state.user})}}),r.a.createElement(C.a,{exact:!0,path:"/search",render:function(t){return r.a.createElement(T,{user:e.state.user})}})))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(p.a,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},61:function(e,t,a){e.exports=a(100)},66:function(e,t,a){},97:function(e,t){},99:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.0083d901.chunk.js.map